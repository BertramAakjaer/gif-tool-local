from flask import Flask, request
from flask_cors import CORS
import os, webbrowser, jsonify, tempfile


app = Flask(__name__)
CORS(app)
PORT = 8000


def open_website():
    # Define the path to the HTML file
    html_file_path = 'index.html'
    abs_path = os.path.abspath(html_file_path)
    webbrowser.open(f'file://{abs_path}')

@app.route('/file_to_gif', methods=['POST'])
def upload_file():
    if 'file' not in request.files:
        return jsonify({'error': 'No file part'}), 400

    file = request.files['file']
    if file.filename == '':
        return jsonify({'error': 'No selected file'}), 400

    if file:
        temp_dir = tempfile.gettempdir()
        file_path = os.path.join(temp_dir, file.filename)
        file.save(file_path)
        
        return jsonify({'output_string': translate_sentences(file_path)})

if __name__ == '__main__':
    open_website()
    app.run(port=PORT)